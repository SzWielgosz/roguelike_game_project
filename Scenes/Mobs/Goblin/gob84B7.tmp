[gd_scene load_steps=24 format=3 uid="uid://bxf8y8e8qe12p"]

[ext_resource type="Script" path="res://Scenes/Mobs/Goblin/goblin.gd" id="1_alu10"]
[ext_resource type="Texture2D" uid="uid://wqr5yqw6ioo5" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_idle_anim_f0.png" id="1_kwkj8"]
[ext_resource type="Texture2D" uid="uid://cu14ytb5m7pp8" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_idle_anim_f1.png" id="2_kne87"]
[ext_resource type="Texture2D" uid="uid://buyccfdlaek8j" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_idle_anim_f2.png" id="3_vf12e"]
[ext_resource type="Texture2D" uid="uid://c0poyivh1xio5" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_idle_anim_f3.png" id="4_lid8n"]
[ext_resource type="Texture2D" uid="uid://bgmo8makuk5s6" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_idle_anim_f4.png" id="5_bk2ph"]
[ext_resource type="Texture2D" uid="uid://3e03li7enmun" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_idle_anim_f5.png" id="6_hfygv"]
[ext_resource type="Texture2D" uid="uid://wiaed8r6d7sk" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_run_anim_f0.png" id="7_1rdoj"]
[ext_resource type="Texture2D" uid="uid://607ul12tir4a" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_run_anim_f1.png" id="8_yelco"]
[ext_resource type="Texture2D" uid="uid://cyna13yl4sil" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_run_anim_f2.png" id="9_qrhem"]
[ext_resource type="Texture2D" uid="uid://d3l4vx4deglj0" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_run_anim_f3.png" id="10_xixvu"]
[ext_resource type="Texture2D" uid="uid://bo8o61slmdfgs" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_run_anim_f4.png" id="11_fykjh"]
[ext_resource type="Texture2D" uid="uid://lcyitoqn7bvc" path="res://Art/v1.1 dungeon crawler 16X16 pixel pack/enemies/goblin/goblin_run_anim_f5.png" id="12_ay5nv"]
[ext_resource type="Script" path="res://Scenes/Mobs/Goblin/state_machine.gd" id="13_0y45a"]
[ext_resource type="Script" path="res://Scenes/Mobs/Goblin/Idle.gd" id="14_hcl38"]
[ext_resource type="Script" path="res://Scenes/Mobs/Goblin/Wander.gd" id="15_vvbef"]
[ext_resource type="Script" path="res://Scenes/Mobs/Goblin/Follow.gd" id="16_boeul"]
[ext_resource type="Script" path="res://Scenes/Mobs/Goblin/Death.gd" id="18_3ku6j"]

[sub_resource type="SpriteFrames" id="SpriteFrames_y88jy"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_kwkj8")
}, {
"duration": 1.0,
"texture": ExtResource("2_kne87")
}, {
"duration": 1.0,
"texture": ExtResource("3_vf12e")
}, {
"duration": 1.0,
"texture": ExtResource("4_lid8n")
}, {
"duration": 1.0,
"texture": ExtResource("5_bk2ph")
}, {
"duration": 1.0,
"texture": ExtResource("6_hfygv")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("7_1rdoj")
}, {
"duration": 1.0,
"texture": ExtResource("8_yelco")
}, {
"duration": 1.0,
"texture": ExtResource("9_qrhem")
}, {
"duration": 1.0,
"texture": ExtResource("10_xixvu")
}, {
"duration": 1.0,
"texture": ExtResource("11_fykjh")
}, {
"duration": 1.0,
"texture": ExtResource("12_ay5nv")
}],
"loop": true,
"name": &"run",
"speed": 5.0
}]

[sub_resource type="LabelSettings" id="LabelSettings_q8oa4"]

[sub_resource type="CircleShape2D" id="CircleShape2D_ykbv5"]
radius = 155.003

[sub_resource type="RectangleShape2D" id="RectangleShape2D_matrb"]
size = Vector2(11, 13)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_l5unc"]
size = Vector2(9, 8.5)

[node name="Goblin" type="CharacterBody2D"]
position = Vector2(50, 0)
collision_layer = 2
collision_mask = 53
motion_mode = 1
script = ExtResource("1_alu10")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_y88jy")
animation = &"run"

[node name="debug" type="Label" parent="."]
offset_left = -23.0
offset_top = -31.0
offset_right = 26.0
offset_bottom = -8.0
text = "debug"
label_settings = SubResource("LabelSettings_q8oa4")

[node name="DetectionRange" type="Area2D" parent="."]
collision_mask = 12

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionRange"]
shape = SubResource("CircleShape2D_ykbv5")

[node name="HitBox" type="Area2D" parent="."]
collision_mask = 5

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitBox"]
position = Vector2(0.5, -0.5)
shape = SubResource("RectangleShape2D_matrb")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0.5, -0.75)
shape = SubResource("RectangleShape2D_l5unc")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
path_max_distance = 500.0
avoidance_enabled = true
avoidance_mask = 8
debug_enabled = true

[node name="StateMachine" type="Node2D" parent="."]
script = ExtResource("13_0y45a")

[node name="Idle" type="Node2D" parent="StateMachine"]
script = ExtResource("14_hcl38")

[node name="IdleTimer" type="Timer" parent="StateMachine/Idle"]
wait_time = 2.0
one_shot = true

[node name="Follow" type="Node2D" parent="StateMachine"]
script = ExtResource("16_boeul")

[node name="Wander" type="Node2D" parent="StateMachine"]
script = ExtResource("15_vvbef")

[node name="WanderTimer" type="Timer" parent="StateMachine/Wander"]
one_shot = true

[node name="Death" type="Node2D" parent="StateMachine"]
script = ExtResource("18_3ku6j")

[connection signal="area_entered" from="DetectionRange" to="StateMachine/Idle" method="_on_detection_range_area_entered"]
[connection signal="area_entered" from="DetectionRange" to="StateMachine/Follow" method="_on_detection_range_area_entered"]
[connection signal="area_entered" from="DetectionRange" to="StateMachine/Wander" method="_on_detection_range_area_entered"]
[connection signal="area_exited" from="DetectionRange" to="StateMachine/Idle" method="_on_detection_range_area_exited"]
[connection signal="area_exited" from="DetectionRange" to="StateMachine/Follow" method="_on_detection_range_area_exited"]
[connection signal="area_exited" from="DetectionRange" to="StateMachine/Wander" method="_on_detection_range_area_exited"]
[connection signal="body_entered" from="HitBox" to="StateMachine/Wander" method="_on_hit_box_body_entered"]
[connection signal="body_exited" from="HitBox" to="StateMachine/Wander" method="_on_hit_box_body_exited"]
[connection signal="timeout" from="StateMachine/Idle/IdleTimer" to="StateMachine/Idle" method="_on_timer_timeout"]
[connection signal="timeout" from="StateMachine/Wander/WanderTimer" to="StateMachine/Wander" method="_on_timer_timeout"]
